@using System.Globalization;
@model PiggyBankMVC.Models.ViewModels.ShoppingCartViewModel

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row checkoutForm">
    <h1>Shopping cart</h1>
    <hr />
    <br />

    @if (Model.ShoppingCart.Items.Count() != 0)
    {
        <table class="table table-stripped">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Total Price</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.ShoppingCart.Items)
                {
                    <tr>
                        <td>@item.Product?.Name</td>
                        <td>@item.Quantity</td>
                        <td>@(@item.Product?.Price * @item.Quantity)</td>
                        <td><a asp-controller="ShoppingCarts" asp-action="Remove">Remove</a></td>
                    </tr>
                }
            </tbody>
        </table>

        <br />
        <br />
        <br />
        <br />
        <hr />
        <br />

        <dl class="row">
            <dt class="col-sm-1">
                Total Price
            </dt>
            <dd class="col-sm-10">
                @(
                    Model.TotalPrice.ToString("c", CultureInfo.CreateSpecificCulture("fr-FR"))
                    )
            </dd>
        </dl>

        <hr />
    }
    else
    {
        <p>You cart is empty. Go shopping !</p>
    }

    <div>
        <a class="" asp-action="Back" asp-route-returnUrl="@Model.LastUrl">Back</a>
        @if (Model.ShoppingCart.Items.Count() != 0)
        {
            <a asp-controller="Order" asp-action="ConvertShoppingCart">Check out</a>
        }
    </div>

</div>
